<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,
    initial-scale=1.0">
    <title>SignUp to Dashboard</title>
    <link rel="stylesheet" href="assets/css/style2.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>   

    <div class="wrapper">
        <div action="">
            <h1>Sign Up</h1>
            <div class ="input-box">
                <input type="text" placeholder="Username" id="username"
                required>
                <i class = 'bx bxs-user'></i>
            </div>

            <div class="input-box">
                <input type="email" placeholder="Email" id="email" required>
                <i class='bx bx-envelope'></i>
            </div>


            <div class="input-box">
                <input type="password" placeholder="Password" id="password" required>
                <i class = 'bx bxs-lock-alt'></i>
            </div>

            
           
              <button type="submit" class="btn" id="signup" name="signup-submit" value="Sign Up">Register</button>
            

            
            <br><br>

            <a href="index3.html", class="custom-link">Already Registred? Login</a>
            
          </div>
    </div>

</body>


<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import { getDatabase, set, ref } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";
    import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyA3FALL9UPYS3HkuZzrxiO1sfKifHbtxq0",
      authDomain: "login-auth-7ac33.firebaseapp.com",
      projectId: "login-auth-7ac33",
      storageBucket: "login-auth-7ac33.appspot.com",
      messagingSenderId: "121945008163",
      appId: "1:121945008163:web:291bc0c67dbe1f7a996996"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const auth = getAuth();



    signup.addEventListener('click', (e) => {
        event.preventDefault()
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;
        var username = document.getElementById('username').value;

        
        createUserWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed up 

    const user = userCredential.user;

    set(ref(database, 'users/' + user.uid),{
        username: username,
        email: email
    })

    alert('User Created Successfully')
    setTimeout(function() {
  window.location.href = "index3.html";
}, 1);
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    alert(errorMessage)
    // ..
  });
    })
  </script>
</html>